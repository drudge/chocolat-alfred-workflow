/*!
 * node-alp
 * Copyright (c) 2014 Nicholas Penree <nick@penree.com>
 * MIT Licensed
 */

var plist = require('plist');
var path = require('path');
var fs = require('fs');

var bundleID;

exports.readPlistSync = function(f) {
  return plist.parse(fs.readFileSync(path.resolve(f), 'utf8'));
};

exports.bundleSync = function() {
  if (bundleID) return bundleID;
  
  var info = exports.readPlistSync('./info.plist');
  
  bundleID = info.bundleid;
  
  if (!bundleID) throw new Error('Bundle ID not defined or readable from info.plist.');
  
  return bundleID;
};